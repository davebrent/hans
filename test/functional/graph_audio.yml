---
- request:
    jsonrpc: "2.0"
    id: 0
    method: set_program
    params:
      name: test-program
      graphics:
        objects: []
        connections: []
      audio:
        objects:
          - object_id: {{ objects["snd.oscillator"] }}
            args:
              - {name: channels, value: 2}
          - object_id: {{ objects["snd.out"] }}
            args:
              - {name: bus, value: 0}
              - {name: channel, value: 0}
              - {name: channel, value: 1}

        connections:
          - {source: 0, outlet: 0, sink: 1, inlet: 0}
          - {source: 0, outlet: 1, sink: 1, inlet: 1}

  response:
    jsonrpc: "2.0"
    id: 0
    result:
      name: test-program
      graphics:
        connections: []
        objects: []
      audio:
        connections:
          - {source: 0, outlet: 0, sink: 1, inlet: 0}
          - {source: 0, outlet: 1, sink: 1, inlet: 1}
        objects:
          - object_id: {{ objects["snd.oscillator"] }}
            instance_id: 0
            inlets: 0
            outlets: 2
          - object_id: {{ objects["snd.out"] }}
            instance_id: 1
            inlets: 2
            outlets: 0

- request:
    jsonrpc: "2.0"
    id: 0
    method: use_program
    params:
      name: test-program
  response:
    jsonrpc: "2.0"
    id: 0
    result: true

- request:
    jsonrpc: "2.0"
    id: 0
    method: start_audio
  response:
    jsonrpc: "2.0"
    id: 0
    result: true

- request:
    jsonrpc: "2.0"
    id: 0
    method: stop_audio
  response:
    jsonrpc: "2.0"
    id: 0
    result: true
